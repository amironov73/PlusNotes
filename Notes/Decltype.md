### Спецификатор decltype

Спецификатор `decltype` появился в C++11 для обеспечения шаблонной магии. Он выдает декларируемый тип некой сущности или выражения.

```c++
struct S
{
    int a;
};
 
decltype(S::a) b;
 
// шаблонная магия
template <typename T, typename U>
auto add (T left, U right) -> decltype (left + right)
{
    return left + right;
}
 
int main() 
{
    b = add (4, 5);
    return 0;
}
```

Обратите внимание, можно написать `declspec (f())`, тело функции `f()` при этом компилятору не нужно, он всё равно выдаст правильный тип. Однако, с подвыражениями всё становится заметно сложнее: если написать `decltype (f(g()))`, то компилятору потребуются полные сведения о типе, возвращаемом `g()`, в том числе о наличии деструктора.
