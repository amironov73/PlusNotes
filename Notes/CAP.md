### CAP

https://habr.com/ru/post/470317/

*CAP theorem. Теорема CAP.* Теорема гласит, что любая распределенная система может обладать не более, чем двумя свойствами из списка: согласованность данных (Consistency), доступность (Availability), устойчивость к разделению (Partition tolerance).

* **Согласованность** в данном случае означает (упрощенно) последовательную согласованность. Т.е. как только операция обновления данных на одном узле успешно завершилась, все остальные узлы уже имеют у себя эти обновленные данные. Соответственно, все узлы находятся в согласованном состоянии. Это не та согласованность, которая требуется в ACID.
* **Доступность** означает, что каждый не упавший узел возвращает корректный ответ на каждый запрос (и на чтение, и на запись) за разумное время. Гарантия, что ответы разных узлов совпадают, отсутствует.
* **Устойчивость** к разделению означает, что система продолжит работать корректно в случае потери произвольного числа сообщений между ее узлами.

Т.к. все три свойства недостижимы, с точки зрения CAP теоремы все распределенные системы распадаются на три класса: CA, CP и AP. CA системы очевидно не обладают устойчивостью к разделению. Т.к. в подавляющем большинстве случаев распределенность подразумевает распределенность по реальной сети, а в реальной сети всегда есть ненулевая вероятность потерять пакет, то CA системы малоинтересны.

Остается выбор между CP и AP, т. е. между согласованностью и доступностью. Традиционные реляционные СУБД, следующие принципам ACID, предпочитают согласованность. В то время как многие NoSQL решения выбирают доступность и BASE.

В случае нормальной работы сети, т. е. когда нет сетевого разделения, CAP теорема не накладывает никаких ограничений на согласованность и доступность. Т.е. чем-то жертвовать не обязательно.
