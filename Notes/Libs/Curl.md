### libcurl –¥–ª—è C/C++

–ö—Ä–æ–º–µ C#-–æ–±—ë—Ä—Ç–∫–∏ –Ω–∞–¥ cURL, –∫–æ–Ω–µ—á–Ω–æ –∂–µ, –µ—Å—Ç—å –∏ –Ω–∞—Ç–∏–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ—á–∫–∞, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –Ω–∞ C/C++. –ï—ë –¥–æ–º–∞—à–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—á–∫–∞: https://curl.haxx.se/libcurl/, —Ç–∞–º –∂–µ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –∫–∞–∫ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ–¥ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º, —Ç–∞–∫ –∏ –∏—Å—Ö–æ–¥–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã. –í–ø—Ä–æ—á–µ–º, —Å–æ–±—Ä–∞—Ç—å libcurl —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ ‚Äì –¥–µ–ª–æ –ø—è—Ç–∏ –º–∏–Ω—É—Ç, –æ—Å–Ω–æ–≤–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –±–µ—Ä—É—Ç –Ω–∞ —Å–µ–±—è —Å–∫—Ä–∏–ø—Ç—ã, –ª—é–±–µ–∑–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∞–º–∏. –û—Ç –Ω–∞—Å –∂–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ª–∏—à—å –≤—ã–∑–≤–∞—Ç—å CMake, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑–æ–≤–µ—Ç —ç—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã –≤ –Ω—É–∂–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

–î–æ–ø—É—Å—Ç–∏–º, –º—ã —Å–æ–±—Ä–∞–ª–∏ —Ä–µ–ª–∏–∑–Ω—É—é –≤–µ—Ä—Å–∏—é `libcurl.dll`, –∫–∞–∫ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ —Å–æ–∫—Ä–æ–≤–∏—â–µ –≤ —Å–≤–æ—ë–º –ø—Ä–æ–µ–∫—Ç–µ? –ê –≤–æ—Ç –∫–∞–∫. –°–æ–∑–¥–∞—ë–º –ø—É—Å—Ç—É—é –ø–∞–ø–∫—É, –≤ –∫–æ—Ç–æ—Ä—É—é –ø–æ–º–µ—â–∞–µ–º —Ñ–∞–π–ª `CMakeLists.txt` —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è:

```cmake
cmake_minimum_required(VERSION 2.8)
set(CMAKE_CXX_STANDARD 11)
 
project(learnCurl)
 
include_directories(${PROJECT_SOURCE_DIR}/include)
link_directories(${PROJECT_SOURCE_DIR}/libs)
link_libraries(libcurl_imp.lib)
 
add_executable(learnCurl main.cpp)
```

–í –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `libs` –∫–ª–∞–¥—ë–º `libcurl_imp.lib`, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∞ –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `include/curl` –≤—Å–µ h-—Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ `include/curl` –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

–ü–∏—à–µ–º —Ñ–∞–π–ª `main.cpp` —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è:

```c++
#include <cstdio>
#include "curl/curl.h"
 
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –≤—ã–∑—ã–≤–∞–µ–º–∞—è –∏–∑ libcurl, –∫–æ–≥–¥–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞ 
// –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –æ—á–µ—Ä–µ–¥–Ω–∞—è –ø–æ—Ä—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö. 
// –û–Ω–∞ –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª.
static size_t write_data (void *ptr, size_t size, size_t nmemb, void *stream)
{
    size_t written = fwrite (ptr, size, nmemb, (FILE *)stream);
    return written;
}
 
int main() {
    CURL *curl = curl_easy_init();
    if(curl) {
        FILE *file = fopen ("homepage.htm", "wb");
        if (file) {
            curl_easy_setopt (curl, CURLOPT_URL, "http://example.com");
            curl_easy_setopt (curl, CURLOPT_WRITEFUNCTION, write_data);
            curl_easy_setopt (curl, CURLOPT_WRITEDATA, file);
            CURLcode retcode = curl_easy_perform (curl);
            fclose (file);
        }
        curl_easy_cleanup(curl);
    }
 
    return 0;
}
```

–ó–æ–≤—ë–º CMake, –ø–æ–ª—É—á–∞–µ–º `learnCurl.exe`, —Ä—è–¥–æ–º —Å –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å `libcurl.dll`, –∏ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å. –í—É–∞–ª—è! –ú—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–∫–∞—á–∞–ª–∏ —Ñ–∞–π–ª —Å –ø–æ–º–æ—â—å—é libcurl.

–ï—Å–ª–∏ –≤—Å—ë, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ ‚Äî –∑–∞–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª, –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Ä–æ–¥–µ write_data. –ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ–∞–π–ª –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É:

```c++
FILE *file = fopen ("homepage.htm", "wb");
if (file) {
    curl_easy_setopt (curl, CURLOPT_URL, "http://example.com");
    curl_easy_setopt (curl, CURLOPT_FILE, file);
    CURLcode retcode = curl_easy_perform (curl);
    fclose (file);
}
```

–í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–π —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ–≥–¥–∞ —Ñ–∞–π–ª—ã —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –ø–æ –æ–¥–Ω–æ–º—É, –±–µ–∑ –æ—Å–æ–±–µ–Ω–Ω—ã—Ö –∑–∞–º–æ—Ä–æ—á–µ–∫. –î–ª—è —Ç–µ—Ö, –∫–æ–º—É —ç—Ç–æ–≥–æ –º–∞–ª–æ, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –Ω–∞–∑—ã–≤–∞–µ–º—ã–π multi.

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –≤–µ—Ä—Å–∏—é libcurl –∏ –Ω–µ —Ç–∞—Å–∫–∞—Ç—å —Å —Å–æ–±–æ–π `libcurl.dll`:

```
> cmake.exe -D BUILD_SHARED_LIBS=OFF -D CURL_DISABLE_LDAP=ON -D CMAKE_BUILD_TYPE=Release ..
> cmake.exe --build . --config Release
```

–ó–¥–µ—Å—å —è –æ—Ç–∫–ª—é—á–∏–ª –≤ libcurl –ø–æ–¥–¥–µ—Ä–∂–∫—É LDAP, —Ç. –∫. –æ–Ω–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –º–Ω–µ –Ω–µ –Ω—É–∂–Ω–∞. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫–ª—é—á–∏—Ç—å —á—Ç–æ-–Ω–∏–±—É–¥—å –µ—â—ë. üôÇ
