### COW

https://habr.com/ru/post/470317/

*Copy On Write. Копирование при записи.* Это механизм управления ресурсами, так же известный как `implicit sharing` и `lazy copy`. Идея в том, что когда требуется копия, ресурс на самом деле не копируется, но создается ссылка на него. И лишь когда поступает запрос на внесение изменений — в оригинал или в «копию» — только тогда происходит создание полноценной копии.

Преимущество COW очевидно: копирование любого объекта происходит мгновенно. Если объекты часто копируются, но редко изменяются, выигрыш в производительности может быть существенным.

Примеры использования COW:

* Управление виртуальной памятью процессов в Linux. При вызове fork() страницы памяти процесса не копируются, а лишь помечаются как совместно используемые.

* Создание снимков (snapshots) в некоторых файловых системах (Btrfs, ZFS) и базах данных (MS SQL Server).

* До С++11 некоторые реализации std::string использовали COW. В C++11 требования к std::string изменились (см. ABI).

* Многие типы в Qt используют COW.
