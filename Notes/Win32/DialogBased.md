### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∏–∞–ª–æ–≥–∞

–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø–æ–≥—Ä—É–∂–∞—Ç—å—Å—è –≤ –ø—É—á–∏–Ω—ã UI-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ Win32. –ù–∞ —Å–µ–π —Ä–∞–∑ —Å–æ–∑–¥–∞–¥–∏–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä, —Å–∫–ª–∞–¥—ã–≤–∞—é—â–∏–π –¥–≤–∞ —á–∏—Å–ª–∞ –Ω–∞ —á–∏—Å—Ç–æ–º WINAPI. –î–ª—è —ç—Ç–æ–≥–æ –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç Visual Studio, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ CLion —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Ä–µ—Å—É—Ä—Å–æ–≤, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ—Ç –∏ –Ω–µ –ø—Ä–µ–¥–≤–∏–¥–∏—Ç—Å—è.

–°—Ç—Ä–æ–≥–æ –≥–æ–≤–æ—Ä—è, –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –º–∞–ª–æ C++, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–ª–∞—Å—Å—ã –∏ —à–∞–±–ª–æ–Ω—ã —Ç—É—Ç –±—ã–ª–∏ –±—ã –∏–∑–ª–∏—à–Ω–∏. –Ø –¥—É–º–∞—é, —ç—Ç–æ—Ç —Å—Ç–∏–ª—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å ¬´C++ –±–µ–∑ –∫–ª–∞—Å—Å–æ–≤¬ª üôÇ

–ò—Ç–∞–∫, –ø—Ä–∏—Å—Ç—É–ø–∏–º! –ü–æ–∑–æ–≤—ë–º ¬´Windows Desktop Wizard¬ª, —á—Ç–æ–±—ã –æ–Ω –Ω–∞–∫–æ–ª–¥–æ–≤–∞–ª –Ω–∞–º –ø—É—Å—Ç–æ–π –ø—Ä–æ–µ–∫—Ç.

![dialog01](img/dialog01.png)

–í—ã–±–∏—Ä–∞–µ–º ¬´Empty project¬ª: –º—ã —Å–æ–±–∏—Ä–∞–µ–º—Å—è —Å–¥–µ–ª–∞—Ç—å –≤—Å—ë —Å–∞–º–∏ –≤—Ä—É—á–Ω—É—é.

![dialog02](img/dialog02.png)

–°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª —Ä–µ—Å—É—Ä—Å–æ–≤ `CalcApplication.rc` –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–µ–≥–æ –¥–∏–∞–ª–æ–≥.

![dialog03](img/dialog03.png)

–ú–µ–Ω—è–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–µ—Å—É—Ä—Å–∞ –Ω–∞ `IDC_MAIN_DIALOG`, –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ–±—ã —è–∑—ã–∫ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ¬´Russian (Russia)¬ª.

![dialog04](img/dialog04.png)

–ù–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–∫–æ–Ω–∫–∞ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –æ–∫–Ω–∞. –ò–¥—ë–º –Ω–∞ —Å–∞–π—Ç https://iconfinder.com (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π) –∏ —Å–∫–∞—á–∏–≤–∞–µ–º –ø–æ–Ω—Ä–∞–≤–∏–≤—à—É—é—Å—è –Ω–∞–º.

![dialog05](img/dialog05.png)

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –µ—ë –≤ —Ñ–∞–π–ª —Ä–µ—Å—É—Ä—Å–æ–≤. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —á—Ç–æ-–Ω–∏–±—É–¥—å –ø–æ–¥—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å.

![dialog06](img/dialog06.png)

–¢. –∫. —É –º–µ–Ω—è –Ω–∞ –Ω–æ—É—Ç–±—É–∫–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–µ —Ç–æ–ª—å–∫–æ Visual Studio 2019 (–≤ –∫–æ—Ç–æ—Ä–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≤—Å—ë –∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç), –Ω–æ –∏ Visual Studio 2015, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—É–ª—á–µ–π–Ω –æ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–π —Å Windows XP –≤–µ—Ä—Å–∏–∏ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

![dialog07](img/dialog07.png)

–í–æ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–¥ Windows 10.

![dialog08](img/dialog08.png)

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ ¬´–º–∞–≥–∏—á–µ—Å–∫–∏–µ¬ª —Å—Ç—Ä–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª—é—á–∞—Ç:

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤ CommCtl.dll
–ü–æ–¥–¥–µ—Ä–∂–∫—É –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —Ç–µ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –¥–ª—è Windows XP/7
–í –ø—Ä–∏–Ω—Ü–∏–ø–µ, –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ CommCtl –∏ —Ç–µ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è, –Ω–æ —Ç–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –Ω–µ —Ç–∞–∫ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ –≤ Windows XP/7. –ù–∞–ø–æ–º–Ω—é, –∫–∞–∫ –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–≥–ª—è–¥–µ—Ç—å:

![dialog09](img/dialog09.png)

![dialog10](img/dialog10.png)

–í–æ—Ç —Ç–µ–∫—Å—Ç `CalcApplication.cpp`:

```c++
#include <windows.h>
#include <CommCtrl.h>
#include <tchar.h>
#include <wchar.h>
#include <stdio.h>

#include "resource.h"

// –ø–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤
#pragma comment (lib, "ComCtl32.lib")

// –≤–∫–ª—é—á–∞–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç–µ–º
#if defined _M_IX86
#pragma comment(linker,"/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='x86' publicKeyToken='6595b64144ccf1df' language='*'\"")
#elif defined _M_X64
#pragma comment(linker,"/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='amd64' publicKeyToken='6595b64144ccf1df' language='*'\"")
#else
#pragma comment(linker,"/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\"")
#endif

// –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞
BOOL InitializeDialog 
    (
        HWND hwnd
    )
{
    // –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∫–æ–Ω–∫—É –¥–∏–∞–ª–æ–≥–∞ –∏–∑ —Ä–µ—Å—É—Ä—Å–æ–≤
    HICON hicon = (HICON) LoadImage
        (
            GetModuleHandle (nullptr),
            MAKEINTRESOURCE(IDI_MAIN_ICON),
            IMAGE_ICON,
            0,
            0,
            LR_DEFAULTCOLOR | LR_DEFAULTSIZE
        );
    SendMessage
        (
            hwnd,
            WM_SETICON,
            ICON_BIG,
            (LPARAM) hicon
        );
    SendMessage
        (
            hwnd,
            WM_SETICON,
            ICON_SMALL,
            (LPARAM) hicon
        );

    // –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –≤–≤–æ–¥–∏–º–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
    SendDlgItemMessage (hwnd, IDC_FIRST_TERM_EDIT, EM_SETLIMITTEXT, 10, 0);
    SendDlgItemMessage (hwnd, IDC_SECOND_TERM_EDIT, EM_SETLIMITTEXT, 10, 0);

    return FALSE;
}

// –ø—Ä–æ—Å—Ç–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –¥–ª—è –æ–∫–Ω–∞ "–û –ø—Ä–æ–≥—Ä–∞–º–º–µ"
BOOL CALLBACK AboutProc
    (
        HWND hwnd,
        UINT message,
        WPARAM wParam,
        LPARAM lParam
    )
{
    switch (message)
    {
        case WM_CLOSE:
            EndDialog (hwnd, 0);
            return FALSE;

        // –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–∞–∂–∞—Ç–∏–µ ESC
        case WM_COMMAND:
            if (LOWORD (wParam) == IDCANCEL) 
            {
                EndDialog (hwnd, 0);
            }
            return FALSE;

        default:
            return FALSE;
    }
}

// –ø–æ–∫–∞–∑ –æ–∫–Ω–∞ "–û –ø—Ä–æ–≥—Ä–∞–º–º–µ"
void AboutProgram
    (
        HWND hwnd
    )
{
    DialogBox
        (
            GetModuleHandle (nullptr),
            MAKEINTRESOURCE (IDD_ABOUT_DIALOG),
            nullptr,
            (DLGPROC) AboutProc
        );
}

// –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—É–º–º—ã –¥–≤—É—Ö –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª
void Calculate
    (
        HWND hwnd
    )
{
    const int MaxLength = 30;
    TCHAR firstTerm[MaxLength], secondTerm[MaxLength];
    
    ZeroMemory (firstTerm, sizeof (firstTerm));
    ZeroMemory (secondTerm, sizeof (secondTerm));
    
    GetDlgItemText 
        (
            hwnd, 
            IDC_FIRST_TERM_EDIT, 
            firstTerm, 
            MaxLength
        );
    GetDlgItemText 
        (
            hwnd, 
            IDC_SECOND_TERM_EDIT, 
            secondTerm, 
            MaxLength
        );

    int firstValue = 0, secondValue = 0;

#ifdef UNICODE
    swscanf_s (firstTerm, _T("%u"), &firstValue);
    swscanf_s (secondTerm, _T("%u"), &secondValue);
#else
    sscanf_s (firstTerm, "%u", &firstValue);
    sscanf_s (secondTerm, "%u", &secondValue);
#endif

    int resultValue = firstValue + secondValue;
    TCHAR resultText[MaxLength];
    ZeroMemory (resultText, MaxLength);
#ifdef UNICODE
    swprintf_s (resultText, _T("–°—É–º–º–∞ —Ä–∞–≤–Ω–∞ %u"), resultValue);
#else
    sprintf_s (resultText, "–°—É–º–º–∞ —Ä–∞–≤–Ω–∞ %u", resultValue);
#endif

    SetDlgItemText (hwnd, IDC_RESULT_EDIT, resultText);
}

// –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–æ–∫
BOOL HandleCommand
    (
        HWND hwnd,
        UINT message,
        WPARAM wParam,
        LPARAM lParam
    )
{
    switch (LOWORD (wParam))
    {
        case IDOK:
        case IDCANCEL:
            SendMessage (hwnd, WM_CLOSE, 0, 0);
            break;

        case IDC_CALCULATE_BUTTON:
            Calculate (hwnd);
            break;

        case IDC_ABOUT_BUTTON:
            AboutProgram (hwnd);
            break;

        default:
            break;
    }

    return FALSE;
}

// –ø—Ä–æ—Ü–µ–¥—É—Ä–∞-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤–æ–≥–æ –æ–∫–Ω–∞
BOOL CALLBACK DialogProc
    (
        HWND hwnd,
        UINT message,
        WPARAM wParam,
        LPARAM lParam
    )
{
    switch (message)
    {
        case WM_INITDIALOG:
            return InitializeDialog (hwnd);

        case WM_COMMAND:
            return HandleCommand 
                (
                    hwnd, 
                    message, 
                    wParam, 
                    lParam
                );

        case WM_CLOSE:
            EndDialog (hwnd, 0);
            return FALSE;

        default:
            return FALSE;
    }
}

// —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É
int WINAPI WinMain
    (
        HINSTANCE hInstance,     // —Ç–µ–∫—É—â–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        HINSTANCE hPrevInstance, // –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
        LPSTR pCmdLine,          // –∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
        int iCmdShow             // —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–∫–Ω–∞
    )
{
    InitCommonControls();

    return (int) DialogBox
        (
            hInstance,
            MAKEINTRESOURCE (IDD_MAIN_DIALOG),
            nullptr,
            (DLGPROC) DialogProc
        );
}
```
